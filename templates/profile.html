{% extends 'base.html' %}

{% block title %}My Profile{% endblock %}

{% block content %}
    
    <div class="content-wrapper-narrow">

        <h2 style="text-align: center; margin-bottom: 30px;">My Profile</h2>

        <div class="profile-info">
            <div class="profile-details-grid">
                <strong>Email:</strong> <span>{{ user.email }}</span>
                <strong>Name:</strong> <span>{{ user.first_name }} {{ user.last_name }}</span>
            </div>
        </div>

        <div class="profile-info">
            <h3>My Phone Numbers</h3>
            
            <div class="phone-list-grid" style="font-weight: 700; color: var(--primary-color); margin-bottom: 5px; border-bottom: 2px solid var(--primary-color);">
                <span>Phone Number</span>
                <span>Status</span>
                <span style="text-align: right;">Action</span>
            </div>
            
            {% if phones %}
                {% for phone in phones %}
                    <div class="phone-list-grid">
                        
                        <span>{{ phone.phone_number }}</span>
                        
                        <span class="phone-status">
                            {% if phone.is_primary %}(Primary){% endif %}
                        </span>
                        
                        <span style="text-align: right;">
                            <form action="{% url 'delete-phone' phone.cust.cust_id phone.phone_number %}" method="post" style="display: inline; margin-left: 15px;">
                                {% csrf_token %}
                                
                                <button type.="submit" class="btn-danger-small">
                                    Delete
                                </button>
                                </form>
                        </span>
                    </div>
                {% endfor %}
            {% else %}
                <p style="padding-top: 15px; font-size: 0.9em;">You have not added any phone numbers.</p>
            {% endif %}
        </div>

        <div class="form-wrapper" style="margin-top: 40px; padding: 25px; border: 1px solid var(--border-color); border-radius: 8px;">
            <h3>Add a New Phone Number</h3>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn">Add Phone</button>
            </form>
        </div>
        
    </div>
{% endblock %}