{% extends 'base.html' %}

{% block title %}All Hotels{% endblock %}

{% block content %}
    
    <div class="search-container">
        <form action="{% url 'hotel-list' %}" method="GET" class="search-form">
            <input type="text" name="q" class="search-input" placeholder="Search by hotel name, city, or state..." value="{{ search_query }}">
            <button type="submit" class="search-btn">Search</button>
        </form>
    </div>

    {% if search_query %}
        <h2>Showing results for "{{ search_query }}"</h2>
    {% else %}
        <h2>Our Hotels</h2>
    {% endif %}

    {% if hotels %}
        <ul class="card-list">
            {% for hotel in hotels %}
                <li class="card">
                
                    {% if hotel.images %}
                        <div class="card-slider">
                            {% for image in hotel.images %}
                                <img src="{{ image.image_url }}" alt="{{ image.reference_name }}">
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="image-placeholder">
                            <p>No preview available</p>
                        </div>
                    {% endif %}

                    <div class="card-content">
                        <h3>
                            <a href="{% url 'hotel-detail' hotel.hotel_id %}">
                                {{ hotel.name }}
                            </a>
                        </h3>
                        <p>{{ hotel.city }}, {{ hotel.state }}</p>
                        <p>Rating: {{ hotel.rating }} / 5.0</p>
                        <a href="{% url 'hotel-detail' hotel.hotel_id %}" class="btn-card">
                            View Hotel
                        </a>
                    </div>
                    
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p style="text-align: center; font-size: 1.1em;">
            {% if search_query %}
                No hotels found matching your search.
            {% else %}
                No hotels are available at this time.
            {% endif %}
        </p>
    {% endif %}
{% endblock %}